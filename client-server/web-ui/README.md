# 🏭 4개 가상장비 OPC UA 모니터링 시스템

산업용 장비 4대를 실시간으로 **모니터링하고 제어**할 수 있는 웹 기반 시스템입니다.

## 🎯 주요 기능

- ✅ **4개 장비 모니터링**: Device1~4 각각의 실시간 데이터 확인
- ✅ **온도 모니터링**: 각 장비의 온도 변화 추적 (°C)
- ✅ **작동상태 제어**: ON/OFF 원격 제어 및 실시간 반영
- ✅ **전압/전류 모니터링**: 전력 상태 실시간 확인
- ✅ **카드형 UI**: 장비별 그룹화된 직관적 인터페이스
- ✅ **실시간 업데이트**: 1-10초 간격 사용자 설정 가능
- ✅ **자동 시뮬레이션**: 실제 장비처럼 동작하는 가상 시뮬레이션

## 📋 가상장비 구성

각 장비마다 4개 변수로 구성:

| 변수 | 타입 | 설명 | 제어 | 시뮬레이션 |
|------|------|------|------|------------|
| **온도** | Double | 장비 운전 온도 (°C) | ❌ 읽기전용 | ✅ 작동시 온도 상승 |
| **작동상태** | Boolean | ON/OFF 전원 제어 | ✅ 원격 제어 | ✅ 사용자 제어 |
| **전압** | Double | 공급 전압 (V) | ❌ 읽기전용 | ✅ 약간의 변동 |
| **전류** | Double | 소비 전류 (A) | ❌ 읽기전용 | ✅ 전원연동 |

### 🏭 장비별 특성

- **Device1**: 220V, 기본 전류 2.5A
- **Device2**: 220V, 기본 전류 3.2A  
- **Device3**: 380V, 기본 전류 5.0A (고압 장비)
- **Device4**: 110V, 기본 전류 1.8A (저압 장비)

## 🚀 사용 방법

### 1. 의존성 설치
```bash
cd client-server/web-ui
npm install
```

### 2. OPC UA 서버 실행 (별도 터미널)
```bash
cd client-server/myserver  
node client_server_server.js
```

### 3. 웹 UI 실행
```bash
cd client-server/web-ui
npm start
```

### 4. 브라우저에서 접속
```
http://localhost:3000
```

## 🔧 기술 스택

- **OPC UA 서버**: Node.js + node-opcua
- **웹 서버**: Express.js
- **프론트엔드**: HTML5 + CSS3 + JavaScript (ES6+)
- **통신**: HTTP REST API + JSON
- **UI 패턴**: 반응형 카드 레이아웃

## 📁 시스템 구조

```
client-server/
├── myserver/
│   ├── client_server_server.js    # 4개 가상장비 OPC UA 서버
│   └── package.json               # OPC UA 의존성
└── web-ui/
    ├── server.js                  # Express 웹 서버
    ├── public/
    │   └── index.html            # 카드형 모니터링 UI
    └── package.json              # 웹 서버 의존성
```

## 🔌 포트 및 연결 정보

- **OPC UA 서버**: `localhost:4334`
- **웹 UI**: `localhost:3000`
- **엔드포인트**: `opc.tcp://localhost:4334/UA/MyLittleServer`

## 💡 사용 팁

### 🎛️ 제어 기능
- **작동상태 제어**: 각 장비 카드의 ON/OFF 버튼 클릭
- **즉시 반영**: 제어 후 자동으로 화면 업데이트
- **시각적 피드백**: ON(녹색), OFF(빨간색) 색상 구분

### ⚙️ 모니터링 설정
- **업데이트 간격**: 1~10초 사이 선택 가능
- **자동/수동 모드**: 자동 업데이트 중지/시작 제어
- **수동 새로고침**: 🔄 버튼으로 즉시 데이터 갱신
- **백그라운드 최적화**: 브라우저 탭이 숨겨지면 자동으로 업데이트 빈도 조절

### 📊 시뮬레이션 특성
- **온도**: 작동시 20~80°C 범위에서 변동, 정지시 25°C로 수렴
- **전압**: 기본값 ±5V 범위 변동
- **전류**: 전원 ON시만 흐름, OFF시 0A

## 🔄 데이터 흐름

```
OPC UA 서버 (4334) ↔ 웹 서버 (3000) ↔ 브라우저
     16개 변수           HTTP API         카드 UI
   (4장비 × 4변수)      JSON 통신        실시간 표시
```

## 🛠️ 개발자 정보

- **총 변수 개수**: 16개 (4장비 × 4변수)
- **업데이트 방식**: HTTP 폴링 (WebSocket 대비 단순함)
- **시뮬레이션 주기**: 1초마다 값 계산 및 업데이트
- **UI 스타일**: CSS Grid + Flexbox, 반응형 디자인

실제 산업 현장의 장비 모니터링과 유사한 환경을 제공하는 학습용 시스템입니다! 🎉 